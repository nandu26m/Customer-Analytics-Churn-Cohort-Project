Table users {
  user_id int [pk]
  username varchar(50)
  email varchar(100)
  signup_date date
  status varchar(20)
}

Table subscriptions {
  subscription_id int [pk]
  user_id int [ref: > users.user_id]
  plan_id int [ref: > subscription_plans.plan_id]
  start_date date
  end_date date
  status varchar(20)
}

Table subscription_plans {
  plan_id int [pk]
  plan_name varchar(50)
  price decimal(10,2)
  duration_months int
}

Table subscription_promotions {
  subscription_promo_id int [pk]
  subscription_id int [ref: > subscriptions.subscription_id]
  promo_id int [ref: > promotions.promo_id]
  applied_date date
}

Table promotions {
  promo_id int [pk]
  promo_code varchar(20)
  discount_percent int
  start_date date
  end_date date
  applicable_plan_ids varchar(255) // JSON or CSV string
}

Table payments {
  payment_id int [pk]
  user_id int [ref: > users.user_id]
  subscription_id int [ref: > subscriptions.subscription_id]
  amount decimal(10,2)
  payment_date date
  payment_method varchar(50)
}

Table cancellations {
  cancellation_id int [pk]
  subscription_id int [ref: > subscriptions.subscription_id]
  cancellation_date date
  reason varchar(255)
}

Table user_logins {
  login_id int [pk]
  user_id int [ref: > users.user_id]
  login_timestamp datetime
  ip_address varchar(45)
  device varchar(100)
}

Table support_tickets {
  ticket_id int [pk]
  user_id int [ref: > users.user_id]
  created_at datetime
  resolved_at datetime
  issue_type varchar(100)
  status varchar(50)
  description text
}

Table retention_snapshots {
  snapshot_id int [pk]
  user_id int [ref: > users.user_id]
  snapshot_date date
  retention_score decimal(5,2)
}

Table user_ltv {
  ltv_id int [pk]
  user_id int [ref: > users.user_id]
  ltv decimal(10,2)
  calculated_date date
}

Table churn_events {
  churn_event_id int [pk]
  user_id int [ref: > users.user_id]
  churn_date date
  reason varchar(255)
}
